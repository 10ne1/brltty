README file of the Alva_ABT3 braille library for BRLTTY

Version 1.21 (feb 15, 1996)


Copyright
=========

This driver code is copyrighted under the GNU Public License.  It is free 
software.  See the file 'COPYING' for more details.  Feel free to send me 
comments and bug report (if any :)) to nico@cam.org.


Supported hardware
==================

This driver is supposed to work with any Alva braille display from the 
ABT3xx series, wich includes the ABT320, the ABT340, the ABT380, the 
ABT34D and the ABT38D.  It alse supports the old and new protocol 
according to the firmware version you have.  Keypad and spacepad are not 
supported since I don't have them and got no idea of their use.

Since I only have an ABT340, I just tested on that model with both old 
and new firmware versions.  If somebody out there tested it on another 
model, please tell me about it.  For the same raison, this doc might not 
be accurate for all models, please send me corrections.


ABT Connection
==============

This driver supports serial communication only.  I don't have the doc for 
parallel communication and I'm affraid it would need some kernel hacks 
anyway.

The ABT serial port must be set to alva-mode (default), see the description
of 'Local Mode' in the ABT manual. The ABT serial port has the same
connections as a standard 9-pin serial port of an IBM PC.
Therefore a cable connecting the ABT with a PC must have the following
connections:

9 pin (ABT)        9 pin (PC)   or    25 pin (PC)

1                  1                  8 (CD)
2                  3                  2 (TD)
3                  2                  3 (RD)
4                  6                  6 (DSR)
5                  5                  7 (GND)
6                  4                  20 (DTR)
7                  8                  5 (CTS)
8                  7                  4 (RTS)
9                  9                  22 (RI)

Such a cable can be purchased as a 'null-modem' cable.
All connectors are female D connectors.

By default, the ABT communicates at 9600 Baud, 8 data bits, no parity, 1 
stop bit.  However I already ran it to a hier baudrate but chances to get 
serial errors increase.  The best baudrate I found is 19200 bauds.  Actual 
default is 9600.

NOTE:  I experienced some problems using the serial port while an other 
computer was connected to the parallel port.  If BRLTTY seems to work 
with a strange behavior, just make sure there is nothing plugged to the 
parallel port connector.  It may help...


Before compiling
================

Firmware Version
----------------
Look in the file brlconf.h for a section commented as "User Settings".  You
have to define ABT3_OLD_FIRMWARE (actually commented out) if your firmware
version is older than 010495.  To find your firmware version, simply turn
your ABT on while not plugged to your computer.  The last number that will
appear on the braille display is the firmware version.  If the wrong
firmware version is conpiled in, you won't have access to your ABT control
keys. 

ABT Model
---------
You should also specify the ABT model you'll be using on the line 
"#define MODEL".  You should type ABT320, ABT340, ABT380, ABT34D or 
ABT38D.  Actually configured for ABT340.

Typematic Settings
------------------
Some control keys are repeated automatically when held down.  You can change 
the repeat rate as well as the delay before the key starts being 
repeated.  The values of TYPEMATIC_REPEAT and TYPEMATIC_DELAY represents 
the number of cycles between each repetitions and the number of cycles 
before the first repetition respectively.  Cycle duration is based on 
BRLTTY configuration.

Port Settings
-------------
In the file Makefile located in the BRLTTY home directory, there is a 
line where you can define the default (i.e. when not given on the command 
line) serial port device (such as /dev/ttyS0).  The baudrate to use is 
still defined in the brlconf.h file.


Running the driver
==================

To compile and run BRLTTY, please refer to the documentation about BRLTTY 
itself.  Just to mention that when BRLTTY will start, il will display on 
the screen some copyright stuff, current configuration (model and firmware 
version) and the serial port in use.  Those informations may be useful if 
nothing appends with the braille terminal.  Remember that if you have wrong 
firmware version, the ABT keys won't work byt it should display something 
in braille anyway.

You may run BRLTTY even if no ABT is plugged to the appropriate serial
port.  No check is made to see if an ABT is present or not.


Key bindings
============

All the key definitions are listed in the file brlttyhelp.txt.  For more
information on the functions listed, see the BRLTTY manual.  Basic keys are
nearly the same as with the DOS software. 

Some keys found on the ABT34D, the ABT380 and the ABT38D are not actually 
bound to any functions, since I don't have those keys.  However, it's 
pretty easy to add them in the code.  See the function readbrl() or send 
me your suggestions.


Status Cells
============

The three first cells are used for status information as with the DOS 
software, except for the third one wich have the following meanings:

	t = cursor tracking active
	f = screen is frozen
	a = the display is in attribute mode

While the help screen is invoked, the status cells will display "hlp" and 
" st" is displayed while in status mode.

Again, other models than mine have 5 status cells instead of 3 but the 
two last cells are actually not used.



Nicolas Pitre
nico@cam.org
Febuary 15, 1996
